(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{618:function(e,t,o){var content=o(719);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(18).default)("8100f656",content,!0,{sourceMap:!1})},718:function(e,t,o){"use strict";var r=o(618);o.n(r).a},719:function(e,t,o){(e.exports=o(17)(!1)).push([e.i,".profile-container{margin-left:12rem;margin-right:12rem}.profile-items{display:flex;align-items:center;height:10rem}.profile-items:nth-child(odd){background-color:#f4f5f5}.profile-items:nth-child(2n){background-color:#e6e6e6}.profile-items-inner{display:flex;align-items:center}img.profile-photo{width:75px;height:75px;border-radius:30px}.modal-inputs{padding-left:3rem;padding-right:3rem}.last-name-modal-input{margin-bottom:0!important}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden;display:table;margin:0 auto}.avatar-uploader .el-upload:hover{border-color:#409eff}.modal-avatar-photo{width:100%;height:100%;display:block}",""])},891:function(e,t,o){"use strict";o.r(t);o(14);var r=o(4),l=(o(19),o(27),o(20),o(341)),n=o(56),c=o.n(n),d=o(26),m=o.n(d),f=o(13),h={components:{Modal:l.default},scrollToTop:!1,head:function(){return{title:this.$t("settings")}},data:function(){return{apiUrl:"http://localhost:8000/",isModalVisible:!1,modalName:"imageModal",avatar:"",profileImage:"",form:new c.a({first_name:"",last_name:"",email:"",avatar:""})}},computed:Object(f.b)({user:"auth/user"}),created:function(){var e=this;this.form.keys().forEach(function(t){e.form[t]=e.user[t]})},methods:{showModal:function(e){switch(this.isModalVisible=!0,e){case"imageModal":case"nameModal":case"emailModal":return void(this.modalName=e)}},closeModal:function(){this.isModalVisible=!1,this.modalName=""},getProfileImage:function(){return console.log(this.user,"upateProfile"),this.apiUrl+"/storage/"+this.user.avatar},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,o="image/png"===e.type,r=e.size/1024/1024<2;t||o||this.$message.error("Avatar picture must be JPG or PNG format!"),r||this.$message.error("Avatar picture size can not exceed 2MB!"),this.avatar=e},updateImage:function(){var e=this,t=new FormData;t.append("image",this.avatar,this.avatar.name),m()({method:"post",url:"/settings/avatar",data:t,config:{headers:{"Content-Type":"application/json"}}}).then(function(t){e.$store.dispatch("auth/updateUser",{user:t.data})}),this.closeModal()},updateName:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.form.patch("users/".concat(this.user.id));case 3:t=e.sent,data=t.data,this.$store.commit("auth/UPDATE_USER",data),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:this.isModalVisible=!1,this.modalName="";case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),updateEmail:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}},v=(o(718),o(5)),component=Object(v.a)(h,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-main",{staticClass:"profile-container"},[o("h3",[e._v(e._s(e.$t("profile")))]),e._v(" "),o("el-row",{staticClass:"profile-items"},[o("el-col",{attrs:{span:13,offset:4}},[e._v("\n        "+e._s(e.$t("profile"))+" "+e._s(e.$t("image"))+"\n      ")]),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-row",{staticClass:"profile-items-inner"},[o("el-col",{attrs:{span:4,offset:1}},[o("img",{staticClass:"profile-photo",attrs:{src:this.apiUrl+"/storage/"+this.user.avatar}})]),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-button",{staticClass:"profile-edit-button",on:{click:function(t){return e.showModal("imageModal")}}},[e._v("Edit")])],1)],1)],1)],1),e._v(" "),o("el-row",{staticClass:"profile-items"},[o("el-col",{attrs:{span:13,offset:4}},[e._v("\n        Name\n      ")]),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-row",{staticClass:"profile-items-inner"},[o("el-col",{attrs:{span:5}},[e._v("\n            "+e._s(e.user.first_name)+" "+e._s(e.user.last_name)+"\n          ")]),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-button",{staticClass:"profile-edit-button",on:{click:function(t){return e.showModal("nameModal")}}},[e._v("Edit")])],1)],1)],1)],1),e._v(" "),o("el-row",{staticClass:"profile-items"},[o("el-col",{attrs:{span:13,offset:4}},[e._v("\n        "+e._s(e.$t("email"))+"\n      ")]),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-row",{staticClass:"profile-items-inner"},[o("el-col",{attrs:{span:4,offset:1}},[e._v(" \n            "+e._s(e.user.email)+"\n          ")]),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-button",{staticClass:"profile-edit-button",on:{click:function(t){return e.showModal("emailModal")}}},[e._v("Edit")])],1)],1)],1)],1)],1),e._v(" "),"imageModal"===e.modalName?o("modal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],on:{close:e.closeModal},scopedSlots:e._u([{key:"header",fn:function(){return[o("h3",[e._v("Edit Your Profile Image")])]},proxy:!0},{key:"body",fn:function(){return[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"`http://localhost:8000/users/1`","show-file-list":!1,"before-upload":e.beforeAvatarUpload,drag:!0,"auto-upload":!0,"http-request":e.updateImage}},[o("img",{staticClass:"modal-avatar-photo",attrs:{src:e.getProfileImage()}})])]},proxy:!0}],null,!1,3062169865)}):"nameModal"===e.modalName?o("modal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],on:{close:e.closeModal,showModal:e.showModal},scopedSlots:e._u([{key:"header",fn:function(){return[o("h3",[e._v("Edit you Username")])]},proxy:!0},{key:"body",fn:function(){return[o("el-form",{staticClass:"modal-buttons",on:{submit:function(t){return t.preventDefault(),e.updateName(t)}}},[o("el-form-item",[o("el-input",{attrs:{placeholder:e.user.first_name},model:{value:e.form.first_name,callback:function(t){e.$set(e.form,"first_name",t)},expression:"form.first_name"}})],1),e._v(" "),o("el-form-item",{staticClass:"last-name-modal-input"},[o("el-input",{attrs:{placeholder:e.user.last_name},model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[o("div"),e._v(" "),o("el-button",{attrs:{type:"success"},on:{click:e.updateName}},[e._v("Submit")]),e._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:e.closeModal}},[e._v("Cancel")])]},proxy:!0}])}):"emailModal"===e.modalName?o("modal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],on:{close:e.closeModal,showModal:e.showModal},scopedSlots:e._u([{key:"header",fn:function(){return[o("h3",[e._v("Edit you Email Address")])]},proxy:!0},{key:"body",fn:function(){return[o("el-form",{staticClass:"modal-buttons",on:{submit:function(t){return t.preventDefault(),e.updateEmail(t)}}},[o("el-form-item",[o("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[o("el-button",{attrs:{type:"success"},on:{click:e.updateName}},[e._v("Submit")]),e._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:e.closeModal}},[e._v("Cancel")])]},proxy:!0}])}):e._e()],1)},[],!1,null,null,null);t.default=component.exports}}]);